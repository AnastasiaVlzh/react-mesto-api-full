{"ast":null,"code":"import _slicedToArray from\"/Users/anastasiavolzina/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Footer from'./Footer';import Header from'./Header';import Main from'./Main';import PopupWithForm from'./PopupWithForm';import React from'react';import ImagePopup from'./ImagePopup';import{api}from\"../utils/api\";import{CurrentUserContext}from'../contexts/CurrentUserContext';import EditProfilePopup from'./EditProfilePopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditAvatarPopupOpen=_React$useState2[0],setIsEditAvatarPopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfilePopupOpen=_React$useState4[0],setIsEditProfilePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddPlacePopupOpen=_React$useState6[0],setIsAddPlacePopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isPopupClose=_React$useState8[0],setIsPopupClose=_React$useState8[1];var _React$useState9=React.useState(null),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setСurrentUser=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardClick(card){setSelectedCard(card);}function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard(null);}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});var requestType=isLiked?'DELETE':'PUT';api.updateLike(card._id,requestType).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});});}function handleCardDelete(card){var isOwn=card.owner._id===currentUser._id;api.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});});}React.useEffect(function(){api.getUserData().then(function(result){setСurrentUser(result);}).catch(function(err){console.log(err);});api.getCardsData().then(function(result){setCards(result);}).catch(function(err){console.log(err);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"avatar\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",buttonText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup__field\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"photo-input\",type:\"url\",className:\"popup__input popup__input_type_photo\",defaultValue:\"\",name:\"avatar\",minLength:\"2\",maxLength:\"140\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",id:\"photo-input-error\"})]})}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups}),/*#__PURE__*/_jsxs(PopupWithForm,{name:\"place-profile\",title:\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\",buttonText:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\",isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popup__field\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"place-input\",type:\"text\",className:\"popup__input popup__input_place_name\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",name:\"name\",minLength:\"2\",maxLength:\"30\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",id:\"place-input-error\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup__field\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"link-input\",type:\"url\",className:\"popup__input popup__input_place_link\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",name:\"link\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",id:\"link-input-error\"})]})]}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"place-delete\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",buttonText:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(ImagePopup,{name:\"place-image\",card:selectedCard,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"names":["Footer","Header","Main","PopupWithForm","React","ImagePopup","api","CurrentUserContext","EditProfilePopup","App","useState","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isPopupClose","setIsPopupClose","selectedCard","setSelectedCard","currentUser","setСurrentUser","cards","setCards","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","card","closeAllPopups","handleCardLike","isLiked","likes","some","i","_id","requestType","updateLike","then","newCard","state","map","c","handleCardDelete","isOwn","owner","deleteCard","filter","useEffect","getUserData","result","catch","err","console","log","getCardsData"],"sources":["/Users/anastasiavolzina/Desktop/dev/mesto-react/src/components/App.js"],"sourcesContent":["import Footer from './Footer';\nimport Header from './Header';\nimport Main from './Main';\nimport PopupWithForm from './PopupWithForm';\nimport React from 'react';\nimport ImagePopup from './ImagePopup';\nimport { api } from \"../utils/api\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\nimport EditProfilePopup from './EditProfilePopup';\n\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n\n  const [isPopupClose, setIsPopupClose] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState(null);\n\n  const [currentUser, setСurrentUser] = React.useState('');\n\n  const [cards, setCards] = React.useState([])\n\n  function handleEditAvatarClick(){\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick(){\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick(){\n    setIsAddPlacePopupOpen(true);\n  }\n\n function handleCardClick(card){\n    setSelectedCard(card)\n  }\n\n  function closeAllPopups(){\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    const requestType = isLiked ? 'DELETE' : 'PUT';\n\n    api.updateLike(card._id, requestType)\n    .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    });\n  }\n\n  function handleCardDelete(card) {\n    const isOwn = card.owner._id === currentUser._id;\n    \n    api.deleteCard(card._id)\n    .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n    });\n}\n\n  React.useEffect(() => {\n    api.getUserData()\n      .then(result => {\n        setСurrentUser(result);\n      })\n      .catch(err => {\n        console.log(err);\n      })\n    api.getCardsData()\n      .then(result => {\n        setCards(result);\n      })\n      .catch(err => {\n        console.log(err);\n      })\n}, []);\n\n  return (\n    <div className=\"page\">\n    <CurrentUserContext.Provider value={currentUser}>\n    <Header/>\n    <Main\n      onEditAvatar={handleEditAvatarClick}\n      onEditProfile={handleEditProfileClick}\n      onAddPlace={handleAddPlaceClick}\n      onCardClick ={handleCardClick}\n      cards = {cards}\n      onCardLike = {handleCardLike}\n      onCardDelete = {handleCardDelete}\n\n    />\n    <Footer/>\n    <PopupWithForm\n      name = \"avatar\"\n      title= \"Обновить аватар\"\n      buttonText = \"Сохранить\"\n      isOpen={isEditAvatarPopupOpen}\n      onClose={closeAllPopups}>\n      <div className=\"popup__field\">\n        <input  id=\"photo-input\" type=\"url\" className=\"popup__input popup__input_type_photo\" defaultValue=\"\" name=\"avatar\" minLength=\"2\" maxLength=\"140\" required/>\n        <span className=\"error\" id=\"photo-input-error\"></span>\n      </div>\n    </PopupWithForm>\n    <EditProfilePopup \n    isOpen={isEditProfilePopupOpen} \n    onClose={closeAllPopups} \n    />\n    <PopupWithForm\n      name = \"place-profile\"\n      title= \"Новое место\"\n      buttonText = \"Создать\"\n      isOpen={isAddPlacePopupOpen}\n      onClose={closeAllPopups}>\n      <div className=\"popup__field\">\n        <input id=\"place-input\" type=\"text\" className=\"popup__input popup__input_place_name\" placeholder=\"Название\" name=\"name\" minLength=\"2\" maxLength=\"30\" required/>\n        <span className=\"error\" id=\"place-input-error\"></span>\n      </div>\n      <div className=\"popup__field\">\n        <input id=\"link-input\" type=\"url\" className=\"popup__input popup__input_place_link\" placeholder=\"Ссылка на картинку\" name=\"link\" required/>\n        <span className=\"error\" id=\"link-input-error\"></span>\n      </div>\n    </PopupWithForm>\n    <PopupWithForm\n      name = \"place-delete\"\n      title= \"Вы уверены?\"\n      buttonText = \"Да\">\n    </PopupWithForm>\n    <ImagePopup\n      name=\"place-image\"\n      card={selectedCard}\n      onClose={closeAllPopups} \n      />\n    </CurrentUserContext.Provider>\n  </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}